<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Secretaria</title>
    <!--link footer -->

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />

    <!--link de archivos descargables-->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Descarga Selectiva de PDFs</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />

    <title>Escuela San Francisco- Santa Fe- Capital</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />

    <!-- Tu CSS personalizado al final para que tenga prioridad -->
    <link rel="stylesheet" href="../css/style.css" />
  </head>

  <body>
    <header>
      <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
          <img class="logo" src="../images/logo-primaria.png" />
          <a class="navbar-brand" href="../index.html">San Francisco-S.F.</a>
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbarNavDropdown"
            aria-controls="navbarNavDropdown"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav">
              <li class="nav-item">
                <a
                  class="nav-link active"
                  aria-current="page"
                  href="../pages/novedades.html"
                  >Novedades</a
                >
              </li>
              <li class="nav-item">
                <a class="nav-link" href="../pages/pastoral.html">Pastoral</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="../pages/secretaria.html"
                  >Secretaría</a
                >
              </li>
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="navbarDropdownMenuLink"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  Niveles
                </a>
                <ul
                  class="dropdown-menu"
                  aria-labelledby="navbarDropdownMenuLink"
                >
                  <li>
                    <a class="dropdown-item" href="./inicial.html">Inicial</a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="./pimario.html">Primario</a>
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>
    <main>
      <!--INICIO Caja de descarga PDF NIVEL INICIAL. -->
      <!--
    <div class="pdf-downloads">
      <h3>
        Documentos disponibles. <br />
        Nivel Inicial.
      </h3>

      <div class="file-list">
        <div class="select-all">
          <label>
            <input type="checkbox" id="selectAll" />
            <strong>Seleccionar todos los documentos.</strong>
          </label>
        </div>

        <div class="file-item" onclick="toggleCheckbox(0)">
          <input
            type="checkbox"
            class="file-checkbox"
            data-index="0"
            onclick="event.stopPropagation()"
          />
          <i class="fas fa-file-pdf"></i>
          <div class="file-info">Denuncia de accidente 2024</div>
        </div>

        <div class="file-item" onclick="toggleCheckbox(1)">
          <input
            type="checkbox"
            class="file-checkbox"
            data-index="1"
            onclick="event.stopPropagation()"
          />
          <i class="fas fa-file-pdf"></i>
          <div class="file-info">Ficha de entrevista</div>
        </div>

        <div class="file-item" onclick="toggleCheckbox(2)">
          <input
            type="checkbox"
            class="file-checkbox"
            data-index="2"
            onclick="event.stopPropagation()"
          />
          <i class="fas fa-file-pdf"></i>
          <div class="file-info">Certificado médico</div>
        </div>
      </div>

      <div class="selected-count" id="selectedCount">
        0 archivos seleccionados
      </div>

      <button
        id="downloadBtn"
        onclick="downloadSelectedPDFs()"
        class="tm-btn-gray"
        disabled
      >
        <i class="fas fa-download"></i> Descargar archivos seleccionados.
      </button>

      <div id="downloadStatus" class="download-status"></div>
    </div>
    <!--FIN Caja de descarga PDF NIVEL INICIAL. -->

      <!--INICIO Caja de descarga PDF NIVEL PRIMARIO. -->
      <!--
    <div class="pdf-downloads">
      <h3>
        Documentos disponibles <br />
        Nivel Primario.
      </h3>

      <div class="file-list">
        <div class="select-all">
          <label>
            <input type="checkbox" id="selectAll" />
            <strong>Seleccionar todos los documentos</strong>
          </label>
        </div>

        <div class="file-item" onclick="toggleCheckbox(0)">
          <input
            type="checkbox"
            class="file-checkbox"
            data-index="0"
            onclick="event.stopPropagation()"
          />
          <i class="fas fa-file-pdf"></i>
          <div class="file-info">Denuncia de accidente 2024</div>
        </div>

        <div class="file-item" onclick="toggleCheckbox(1)">
          <input
            type="checkbox"
            class="file-checkbox"
            data-index="1"
            onclick="event.stopPropagation()"
          />
          <i class="fas fa-file-pdf"></i>
          <div class="file-info">Ficha de entrevista</div>
        </div>

        <div class="file-item" onclick="toggleCheckbox(2)">
          <input
            type="checkbox"
            class="file-checkbox"
            data-index="2"
            onclick="event.stopPropagation()"
          />
          <i class="fas fa-file-pdf"></i>
          <div class="file-info">Certificado médico</div>
        </div>
      </div>

      <div class="selected-count" id="selectedCount">
        0 archivos seleccionados
      </div>

      <button
        id="downloadBtn"
        onclick="downloadSelectedPDFs()"
        class="tm-btn-gray"
        disabled
      >
        <i class="fas fa-download"></i> Descargar archivos seleccionados
      </button>

      <div id="downloadStatus" class="download-status"></div>
    </div>
    <!--FIN Caja de descarga PDF NIVEL INICIAL. -->
    </main>
    <!--footer inicio-->
    <footer class="pie">
      <div class="text-center">
        <h5 class="cont">Contáctanos</h5>
        <div class="social-section">
          <!-- WhatsApp Nivel Primario -->
          <div class="social-group">
            <h6>Nivel <br />Inicial-Primario</h6>
            <a
              href="https://api.whatsapp.com/send?phone=5493425135795&text=Hola, Bienvenido/a al C.E.F. del nivel PRIMARIO, en que te puedo ayudar."
              target="_blank"
              class="text-white whatsapp-link"
              aria-label="WhatsApp Nivel Primario"
            >
              <i class="fab fa-whatsapp"></i>
            </a>
          </div>

          <!-- Instagram Niveles Inicial y  Primario -->
          <div class="social-group">
            <h6>
              Niveles<br />
              Inicial-Primario
            </h6>
            <a
              href="https://www.instagram.com/escuelasanfrancisco1001sf?igsh=OTllaTZ6eTRkMGI0&utm_source=qr"
              target="_blank"
              class="text-white instagram-link"
              aria-label="Instagram Nivel Primario"
            >
              <i class="fab fa-instagram"></i>
            </a>
          </div>
          <!-- inicio YouTube -->
          <div class="social-group">
            <h6>YouTube</h6>
            <a
              href="https://www.youtube.com/@tunombredecanalaqui"
              target="_blank"
              class="text-white youtube-link"
              aria-label="YouTube"
            >
              <i class="fab fa-youtube"></i>
            </a>
          </div>
        </div>
        <!--fin de youtube-->
        <!-- Copyright -->
        <div class="copyright-container">
          <p class="copyright">
            © Copyright 2025
            <span class="jpr-cursiva">Juan Pablo, Rodríguez.</span>
          </p>
        </div>
      </div>
    </footer>
    <!-- Copyright -->

    <script>
      // Array con los archivos
      const pdfFiles = [
        {
          url: "../p.d.f/Denuncia accidente 2024 BOFFI (1).pdf",
          name: "Denuncia_accidente_2024.pdf",
        },
        {
          url: "../p.d.f/Ficha de entrevistas (1).pdf",
          name: "Ficha_de_entrevista.pdf",
        },
        {
          url: "../p.d.f/Modelo-certificado-medico-1.pdf",
          name: "Certificado_medico.pdf",
        },
      ];

      // Elementos del DOM
      const selectAllCheckbox = document.getElementById("selectAll");
      const fileCheckboxes = document.querySelectorAll(".file-checkbox");
      const selectedCountDiv = document.getElementById("selectedCount");
      const downloadBtn = document.getElementById("downloadBtn");

      // Event listeners
      selectAllCheckbox.addEventListener("change", toggleAllFiles);
      fileCheckboxes.forEach((checkbox) => {
        checkbox.addEventListener("change", updateSelectedCount);
      });

      function toggleCheckbox(index) {
        const checkbox = document.querySelector(`[data-index="${index}"]`);
        checkbox.checked = !checkbox.checked;
        updateSelectedCount();
      }

      function toggleAllFiles() {
        const isChecked = selectAllCheckbox.checked;
        fileCheckboxes.forEach((checkbox) => {
          checkbox.checked = isChecked;
        });
        updateSelectedCount();
      }

      function updateSelectedCount() {
        const selectedFiles = Array.from(fileCheckboxes).filter(
          (cb) => cb.checked
        );
        const count = selectedFiles.length;

        selectedCountDiv.textContent = `${count} archivo${
          count !== 1 ? "s" : ""
        } seleccionado${count !== 1 ? "s" : ""}`;

        // Habilitar/deshabilitar botón
        downloadBtn.disabled = count === 0;

        // Actualizar "Seleccionar todos"
        selectAllCheckbox.checked = count === fileCheckboxes.length;
        selectAllCheckbox.indeterminate =
          count > 0 && count < fileCheckboxes.length;
      }

      function downloadSelectedPDFs() {
        const selectedIndexes = Array.from(fileCheckboxes)
          .map((cb, index) => (cb.checked ? index : -1))
          .filter((index) => index !== -1);

        if (selectedIndexes.length === 0) {
          showStatus("Por favor selecciona al menos un archivo", "error");
          return;
        }

        const button = downloadBtn;
        button.disabled = true;
        button.innerHTML =
          '<i class="fas fa-spinner fa-spin"></i> Descargando...';

        let downloadCount = 0;
        const totalFiles = selectedIndexes.length;

        showStatus(
          `Iniciando descarga de ${totalFiles} archivo${
            totalFiles !== 1 ? "s" : ""
          }...`,
          "success"
        );

        selectedIndexes.forEach((fileIndex, arrayIndex) => {
          const file = pdfFiles[fileIndex];
          setTimeout(() => {
            downloadFile(file.url, file.name)
              .then(() => {
                downloadCount++;
                showStatus(
                  `Descargando... ${downloadCount}/${totalFiles} completados`,
                  "success"
                );

                if (downloadCount === totalFiles) {
                  setTimeout(() => {
                    showStatus("¡Todas las descargas completadas!", "success");
                    resetButton(button);
                  }, 500);
                }
              })
              .catch((error) => {
                console.error("Error descargando:", file.name, error);
                showStatus(`Error al descargar: ${file.name}`, "error");
                resetButton(button);
              });
          }, arrayIndex * 500);
        });
      }

      function downloadFile(url, filename) {
        return new Promise((resolve, reject) => {
          try {
            const link = document.createElement("a");
            link.href = url;
            link.download = filename;
            link.style.display = "none";

            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            setTimeout(() => resolve(), 100);
          } catch (error) {
            reject(error);
          }
        });
      }

      function showStatus(message, type) {
        const statusDiv = document.getElementById("downloadStatus");
        statusDiv.textContent = message;
        statusDiv.className = `download-status ${type}`;
        statusDiv.style.display = "block";
      }

      function resetButton(button) {
        setTimeout(() => {
          button.disabled = false;
          button.innerHTML =
            '<i class="fas fa-download"></i> Descargar archivos seleccionados';
          updateSelectedCount(); // Revisar si hay archivos seleccionados
        }, 1000);
      }

      // Inicializar contador
      updateSelectedCount();
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
